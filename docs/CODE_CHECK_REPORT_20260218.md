# 代码检查报告 - 公式字段与货币一致性

> 检查日期：2026-02-18

---

## 一、检查项与结论

### 1.1 公式字段：只显示不可编辑

| 页面 | 表格 | 表单/编辑 | 状态 |
|------|------|-----------|------|
| 订单管理 | 显示 | 已排除公式字段 | ✅ 符合 |
| 物流跟踪 | 显示 | 已排除公式字段 | ✅ 已修复 |
| 应收应付 | 显示（卡片） | 无编辑表单 | ✅ 符合 |
| 银行流水 | 显示 | 无编辑表单 | ✅ 符合 |

**修复内容**：物流跟踪编辑弹窗中，`fieldsForEdit` 增加 `!isFormulaField(f)` 过滤，公式字段不再出现在可编辑表单中。

### 1.2 货币符号与「货币」字段一致

| 页面 | 货币来源 | 金额字段符号 | 状态 |
|------|----------|--------------|------|
| 订单管理 | Form.useWatch(currencyFieldId) | getCurrencySymbol(currency) | ✅ 符合 |
| 物流跟踪 | selectedOrder 的货币字段 | getCurrencySymbol(currencyVal) | ✅ 已修复 |
| 应收应付 | item.currency | formatMoney(amount, currency) | ✅ 符合 |
| 银行流水 | - | 表格原样展示 | - |

**修复内容**：物流跟踪编辑表单中，金额类字段的 prefix 由硬编码 `¥` 改为根据当前记录的「货币」字段动态取 `getCurrencySymbol(currencyVal)`。

---

## 二、规范更新

已在 `docs/DEVELOPMENT_STANDARDS.md` 中新增 **4.7 业务展示规范（表格与表单）**：

- **4.7.1** 公式字段：只显示不可编辑
- **4.7.2** 货币符号与「货币」字段一致

版本更新为 v2.2。
